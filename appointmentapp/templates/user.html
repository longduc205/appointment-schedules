<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/userstyle.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header class="navbar">
        <div class="logo">USER</div>
        <nav class="nav-links">
            <a href="#">Home</a>
            <a href="#">All Doctors</a>
            <a href="#">About</a>
            <a href="#">Contact</a>
        </nav>
        <div class="user-avatar">
            <img src="{{ url_for('static', filename='images/user.jpg') }}" alt="User" class="profile-icon">
        </div>
    </header>

    <main class="container">
        <section class="profile-section">
            <div class="profile-photo">
                <img src="{{ url_for('static', filename='images/user.jpg') }}" alt="Doctor">
            </div>
            <div class="profile-info">
                <h2 id="displayName">{{ user.user_name }}</h2>
                
                <hr>

                <form method="POST" action="{{ url_for('update_user_profile', user_id=user.user_id) }}">
                    <!-- Full Name -->
                    <div class="info-block">
                        <h4>Full Name</h4>
                        <p>
                            <span id="displayName">{{ user.fullname_user }}</span>
                            <input type="text" id="inputName" name="fullname_user" value="{{ user.fullname_user }}" class="edit-field" style="display:none;" required>
                        </p>
                    </div>

                    <hr>
                    <div class="info-block">
                        <h4>Contact Information</h4>
                        <p><strong>Email id:</strong>
                            <span id="displayEmail">{{ user.user_email }}</span>
                            <input type="email" name="user_email" value="{{ user.user_email }}" class="edit-field" style="display:none;">
                        </p>
                        <p><strong>Phone:</strong>
                            <span id="displayPhone">{{ user.user_phone }}</span>
                            <input type="text" name="user_phone" value="{{ user.user_phone }}" class="edit-field" style="display:none;">
                        </p>
                        <p><strong>Address:</strong>
                            <span id="displayAddress">{{ patient.address }}</span>
                            <input type="text" name="address" value="{{ patient.address }}" class="edit-field" style="display:none;">
                        </p>
                    </div>
                    <div class="info-block">
                        <h4>Basic Information</h4>
                        <p><strong>Birthday:</strong>
                            <span id="displayBirthday">{{ patient.date_of_birth.strftime('%d %B, %Y') }}</span>
                            <input type="date" name="date_of_birth" value="{{ patient.date_of_birth.strftime('%Y-%m-%d') }}" class="edit-field" style="display:none;">
                        </p>
                    </div>

                    <div class="action-buttons">
                        <button type="button" id="editBtn" class="btn-outline">Edit</button>
                        <button type="submit" id="saveBtn" class="btn-primary" style="display:none;">Save information</button>
                    </div>
                </form>

            </div>

        </section>
    </main>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const editBtn = document.getElementById("editBtn");
        const saveBtn = document.getElementById("saveBtn");
        const editFields = document.querySelectorAll(".edit-field");
        const spans = document.querySelectorAll("span[id^='display']");

        editBtn.addEventListener("click", function () {
            editFields.forEach(field => field.style.display = "inline");
            spans.forEach(span => span.style.display = "none");
            editBtn.style.display = "none";
            saveBtn.style.display = "inline";
        });
    });
</script>

</body>
</html>
